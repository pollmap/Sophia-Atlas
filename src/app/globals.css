@import url('https://cdn.jsdelivr.net/gh/orioncactus/pretendard@v1.3.9/dist/web/variable/pretendardvariable-dynamic-subset.min.css');
@import url('https://fonts.googleapis.com/css2?family=Cormorant+Garamond:ital,wght@0,300;0,400;0,500;0,600;0,700;1,300;1,400;1,500;1,600&display=swap');
@import url('https://fonts.googleapis.com/css2?family=Noto+Serif+KR:wght@300;400;500;600;700&display=swap');

@tailwind base;
@tailwind components;
@tailwind utilities;

/* ============================================
   Fresco Design System v1.0
   Renaissance Fresco / Parchment Aesthetic
   ============================================ */

:root {
  /* ── Fresco Backgrounds ── */
  --fresco-ivory: #FAF6E9;
  --fresco-parchment: #F0E6D3;
  --fresco-aged: #E8DCCA;
  --fresco-shadow: #D4C4AB;

  /* ── Sepia Inks ── */
  --ink-dark: #2C2416;
  --ink-medium: #4A3C2A;
  --ink-light: #7A6B55;
  --ink-faded: #9C8B73;

  /* ── Gold Accent ── */
  --gold: #B8860B;
  --gold-hover: #D4A84B;
  --gold-light: #E8C874;
  --gold-muted: rgba(184, 134, 11, 0.15);

  /* ── Tradition Pigments ── */
  --pigment-western: #3D5A80;
  --pigment-buddhism: #5B7355;
  --pigment-confucianism: #8B4513;
  --pigment-daoism: #CC7722;
  --pigment-indian: #C2703E;
  --pigment-islam: #5D4E6D;

  /* ── Category Colors (warm-shifted) ── */
  --cat-philosopher: #4A5D8A;
  --cat-religious: #B8860B;
  --cat-scientist: #5B7355;
  --cat-historical: #8B4040;
  --cat-cultural: #7A5478;

  /* ── Era Colors (fresco-warm) ── */
  --era-ancient: #B8860B;
  --era-medieval: #6B4E8A;
  --era-modern: #4A7A6B;
  --era-contemporary: #6B6358;

  /* ── Semantic Mappings ── */
  --color-background: var(--fresco-ivory);
  --color-background-secondary: var(--fresco-parchment);
  --color-background-tertiary: var(--fresco-aged);
  --color-foreground: var(--ink-dark);
  --color-foreground-secondary: var(--ink-medium);
  --color-foreground-muted: var(--ink-light);
  --color-accent: var(--gold);
  --color-accent-hover: var(--gold-hover);
  --color-border: var(--fresco-shadow);
  --color-border-light: var(--fresco-aged);
  --color-ancient: var(--era-ancient);
  --color-medieval: var(--era-medieval);
  --color-modern: var(--era-modern);
  --color-contemporary: var(--era-contemporary);
  --color-selection-bg: rgba(184, 134, 11, 0.25);
  --color-selection-text: var(--ink-dark);
  --color-scrollbar-track: var(--fresco-parchment);
  --color-scrollbar-thumb: var(--fresco-shadow);
  --color-scrollbar-thumb-hover: var(--ink-faded);

  /* ── Layout ── */
  --header-height: 4rem;
  --sidebar-width: 20rem;
  --sidebar-collapsed-width: 4rem;
}

/* ============================================
   Dark Mode — Warm Scholar's Study
   ============================================ */
.dark {
  /* ── Dark Fresco Backgrounds ── */
  --fresco-ivory: #1A1714;
  --fresco-parchment: #22201B;
  --fresco-aged: #2A2722;
  --fresco-shadow: #3D3830;

  /* ── Light Inks (inverted for readability) ── */
  --ink-dark: #E8E0D4;
  --ink-medium: #C4B9A8;
  --ink-light: #9C8B73;
  --ink-faded: #7A6B55;

  /* ── Gold Accent (slightly brighter in dark) ── */
  --gold: #D4A84B;
  --gold-hover: #E8C874;
  --gold-light: #B8860B;
  --gold-muted: rgba(212, 168, 75, 0.15);

  /* ── Category Colors (slightly brighter for dark bg) ── */
  --cat-philosopher: #6B82B8;
  --cat-religious: #D4A84B;
  --cat-scientist: #7A9E73;
  --cat-historical: #B85D5D;
  --cat-cultural: #A87AA0;

  /* ── Era Colors (brighter) ── */
  --era-ancient: #D4A84B;
  --era-medieval: #9B7BBD;
  --era-modern: #6BA394;
  --era-contemporary: #8A8176;

  /* ── Semantic (auto-swap) ── */
  --color-background: var(--fresco-ivory);
  --color-background-secondary: var(--fresco-parchment);
  --color-background-tertiary: var(--fresco-aged);
  --color-foreground: var(--ink-dark);
  --color-foreground-secondary: var(--ink-medium);
  --color-foreground-muted: var(--ink-light);
  --color-accent: var(--gold);
  --color-accent-hover: var(--gold-hover);
  --color-border: var(--fresco-shadow);
  --color-border-light: var(--fresco-aged);
  --color-selection-bg: rgba(212, 168, 75, 0.25);
  --color-selection-text: var(--ink-dark);
  --color-scrollbar-track: var(--fresco-parchment);
  --color-scrollbar-thumb: var(--fresco-shadow);
  --color-scrollbar-thumb-hover: var(--ink-faded);
}

/* ============================================
   Base Styles — Fresco Theme
   ============================================ */
@layer base {
  *,
  *::before,
  *::after {
    box-sizing: border-box;
    margin: 0;
    padding: 0;
  }

  html {
    scroll-behavior: smooth;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    text-rendering: optimizeLegibility;
    font-feature-settings: "kern" 1, "liga" 1;
  }

  body {
    font-family: "Noto Serif KR", "Pretendard Variable", Pretendard,
      Georgia, "Times New Roman", serif;
    background-color: var(--fresco-ivory);
    color: var(--ink-dark);
    line-height: 1.8;
    letter-spacing: 0.01em;
    min-height: 100vh;
    overflow-x: hidden;
    transition: background-color 0.3s ease, color 0.3s ease;
  }

  /* Selection */
  ::selection {
    background-color: var(--color-selection-bg);
    color: var(--color-selection-text);
  }

  ::-moz-selection {
    background-color: var(--color-selection-bg);
    color: var(--color-selection-text);
  }

  /* Focus Styles */
  :focus-visible {
    outline: 2px solid var(--gold);
    outline-offset: 2px;
    border-radius: 4px;
  }

  /* Headings — Cormorant Garamond for display */
  h1, h2, h3, h4, h5, h6 {
    font-family: "Cormorant Garamond", "Noto Serif KR", Georgia, serif;
    font-weight: 600;
    line-height: 1.3;
    letter-spacing: -0.01em;
    color: var(--ink-dark);
  }

  h1 { font-size: 2.75rem; font-weight: 700; }
  h2 { font-size: 2rem; }
  h3 { font-size: 1.5rem; }
  h4 { font-size: 1.25rem; }

  /* Links */
  a {
    color: var(--gold);
    text-decoration: none;
    transition: color 0.2s ease;
  }

  a:hover {
    color: var(--gold-hover);
  }

  /* Code */
  code, pre {
    font-family: "JetBrains Mono", "Fira Code", monospace;
  }

  pre {
    background-color: var(--fresco-parchment);
    border: 1px solid var(--fresco-shadow);
    border-radius: 4px;
    padding: 1rem;
    overflow-x: auto;
  }

  code {
    background-color: var(--fresco-aged);
    padding: 0.125rem 0.375rem;
    border-radius: 2px;
    font-size: 0.875em;
  }

  pre code {
    background: none;
    padding: 0;
    border-radius: 0;
  }

  /* Images */
  img {
    max-width: 100%;
    height: auto;
  }
}

/* ============================================
   Scrollbar — Parchment style
   ============================================ */
::-webkit-scrollbar {
  width: 8px;
  height: 8px;
}

::-webkit-scrollbar-track {
  background: var(--color-scrollbar-track);
}

::-webkit-scrollbar-thumb {
  background: var(--color-scrollbar-thumb);
  border-radius: 4px;
  transition: background 0.2s ease;
}

::-webkit-scrollbar-thumb:hover {
  background: var(--color-scrollbar-thumb-hover);
}

::-webkit-scrollbar-corner {
  background: var(--color-scrollbar-track);
}

* {
  scrollbar-width: thin;
  scrollbar-color: var(--color-scrollbar-thumb) var(--color-scrollbar-track);
}

/* ============================================
   Fresco Component Styles
   ============================================ */
@layer components {
  /* Parchment Card */
  .fresco-card {
    background: var(--fresco-parchment);
    border: 1px solid var(--fresco-shadow);
    border-radius: 4px;
    box-shadow: 0 2px 8px rgba(44, 36, 22, 0.08);
    transition: all 0.3s ease;
  }

  .fresco-card:hover {
    box-shadow: 0 4px 16px rgba(44, 36, 22, 0.12);
    border-color: var(--gold);
    transform: translateY(-2px);
  }

  /* Fresco Header */
  .fresco-header {
    background: rgba(250, 246, 233, 0.92);
    backdrop-filter: blur(12px) saturate(120%);
    -webkit-backdrop-filter: blur(12px) saturate(120%);
    border-bottom: 1px solid var(--fresco-shadow);
  }

  :is(.dark) .fresco-header {
    background: rgba(26, 23, 20, 0.92);
  }

  /* Glass — deprecated but kept for backwards compat */
  .glass {
    background: rgba(240, 230, 211, 0.7);
    backdrop-filter: blur(16px);
    -webkit-backdrop-filter: blur(16px);
    border: 1px solid var(--fresco-shadow);
  }

  :is(.dark) .glass {
    background: rgba(34, 32, 27, 0.7);
  }

  .glass-header {
    background: rgba(250, 246, 233, 0.92);
    backdrop-filter: blur(20px) saturate(120%);
    -webkit-backdrop-filter: blur(20px) saturate(120%);
    border-bottom: 1px solid var(--fresco-shadow);
  }

  :is(.dark) .glass-header {
    background: rgba(26, 23, 20, 0.92);
  }

  /* Era Indicator Pill */
  .era-pill {
    @apply inline-flex items-center gap-1.5 px-3 py-1 rounded text-xs font-medium;
    @apply border transition-all duration-200;
    font-family: "Pretendard Variable", Pretendard, sans-serif;
  }

  .era-pill-ancient {
    background: rgba(184, 134, 11, 0.1);
    color: var(--era-ancient);
    border-color: rgba(184, 134, 11, 0.3);
  }

  .era-pill-medieval {
    background: rgba(107, 78, 138, 0.1);
    color: var(--era-medieval);
    border-color: rgba(107, 78, 138, 0.3);
  }

  .era-pill-modern {
    background: rgba(74, 122, 107, 0.1);
    color: var(--era-modern);
    border-color: rgba(74, 122, 107, 0.3);
  }

  .era-pill-contemporary {
    background: rgba(107, 99, 88, 0.1);
    color: var(--era-contemporary);
    border-color: rgba(107, 99, 88, 0.3);
  }

  /* Card hover effects */
  .card-hover {
    @apply transition-all duration-300 ease-out;
    @apply hover:-translate-y-0.5;
  }

  .card-hover:hover {
    box-shadow: 0 4px 16px rgba(44, 36, 22, 0.12);
    border-color: var(--gold);
  }

  /* Gold gradient text */
  .gradient-text {
    background: linear-gradient(135deg, var(--gold), var(--gold-hover), var(--gold-light));
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
  }

  /* Section container */
  .section-container {
    @apply max-w-7xl mx-auto px-4 sm:px-6 lg:px-8;
  }

  /* Animated underline on hover */
  .hover-underline {
    @apply relative;
  }

  .hover-underline::after {
    content: "";
    @apply absolute bottom-0 left-0 w-0 h-0.5;
    background: var(--gold);
    @apply transition-all duration-300 ease-out;
  }

  .hover-underline:hover::after {
    @apply w-full;
  }

  /* Quote Block — gold left border */
  .fresco-quote {
    border-left: 3px solid var(--gold);
    padding: 1.25rem 1.5rem;
    background: linear-gradient(135deg, var(--fresco-parchment), var(--fresco-aged));
    border-radius: 0 4px 4px 0;
    font-style: italic;
    color: var(--ink-medium);
  }

  .fresco-quote cite {
    display: block;
    margin-top: 0.75rem;
    font-style: normal;
    font-size: 0.875rem;
    color: var(--gold);
  }

  /* TL;DR / Summary Box */
  .fresco-summary {
    border-left: 3px solid var(--gold);
    padding: 1rem 1.25rem;
    background: var(--fresco-parchment);
    border-radius: 0 4px 4px 0;
  }

  /* Tag (tradition-colored) */
  .fresco-tag {
    display: inline-flex;
    align-items: center;
    padding: 0.25rem 0.75rem;
    border-radius: 2px;
    font-size: 0.75rem;
    font-family: "Pretendard Variable", Pretendard, sans-serif;
    font-weight: 500;
    border: 1px solid transparent;
    transition: all 0.2s ease;
  }

  /* Button — Primary (Gold) */
  .btn-primary {
    display: inline-flex;
    align-items: center;
    gap: 0.5rem;
    padding: 0.625rem 1.5rem;
    background: var(--gold);
    color: var(--fresco-ivory);
    border: none;
    border-radius: 4px;
    font-family: "Pretendard Variable", Pretendard, sans-serif;
    font-size: 0.875rem;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.2s ease;
  }

  .btn-primary:hover {
    background: var(--gold-hover);
    box-shadow: 0 2px 8px rgba(184, 134, 11, 0.3);
  }

  /* Button — Secondary (Outline) */
  .btn-secondary {
    display: inline-flex;
    align-items: center;
    gap: 0.5rem;
    padding: 0.625rem 1.5rem;
    background: transparent;
    color: var(--ink-medium);
    border: 1px solid var(--fresco-shadow);
    border-radius: 4px;
    font-family: "Pretendard Variable", Pretendard, sans-serif;
    font-size: 0.875rem;
    font-weight: 500;
    cursor: pointer;
    transition: all 0.2s ease;
  }

  .btn-secondary:hover {
    border-color: var(--gold);
    color: var(--gold);
    background: var(--gold-muted);
  }

  /* Button — Ghost */
  .btn-ghost {
    display: inline-flex;
    align-items: center;
    gap: 0.5rem;
    padding: 0.5rem 1rem;
    background: transparent;
    color: var(--ink-light);
    border: none;
    border-radius: 4px;
    font-family: "Pretendard Variable", Pretendard, sans-serif;
    font-size: 0.875rem;
    cursor: pointer;
    transition: all 0.2s ease;
  }

  .btn-ghost:hover {
    color: var(--gold);
    background: var(--gold-muted);
  }

  /* Loading skeleton */
  .skeleton {
    @apply animate-pulse rounded;
    background: linear-gradient(
      90deg,
      var(--fresco-parchment) 25%,
      var(--fresco-aged) 50%,
      var(--fresco-parchment) 75%
    );
    background-size: 200% 100%;
    animation: skeleton-shimmer 1.5s ease-in-out infinite;
  }

  @keyframes skeleton-shimmer {
    0% { background-position: 200% 0; }
    100% { background-position: -200% 0; }
  }

  /* Divider with centered text */
  .divider-text {
    @apply flex items-center gap-4 text-sm;
    color: var(--ink-faded);
  }

  .divider-text::before,
  .divider-text::after {
    content: "";
    @apply flex-1 h-px;
    background: var(--fresco-shadow);
  }

  /* Decorative ornament divider */
  .ornament-divider {
    display: flex;
    align-items: center;
    gap: 1rem;
    color: var(--ink-faded);
  }

  .ornament-divider::before,
  .ornament-divider::after {
    content: "";
    flex: 1;
    height: 1px;
    background: linear-gradient(90deg, transparent, var(--fresco-shadow), transparent);
  }
}

/* ============================================
   Utility Additions
   ============================================ */
@layer utilities {
  .text-balance {
    text-wrap: balance;
  }

  .text-pretty {
    text-wrap: pretty;
  }

  /* Hide scrollbar but keep functionality */
  .scrollbar-hide {
    -ms-overflow-style: none;
    scrollbar-width: none;
  }

  .scrollbar-hide::-webkit-scrollbar {
    display: none;
  }

  /* Parchment texture overlay */
  .parchment-texture {
    background-image:
      radial-gradient(ellipse at 20% 50%, rgba(232, 220, 202, 0.3) 0%, transparent 50%),
      radial-gradient(ellipse at 80% 20%, rgba(212, 196, 171, 0.2) 0%, transparent 50%),
      radial-gradient(ellipse at 50% 80%, rgba(240, 230, 211, 0.3) 0%, transparent 50%);
  }

  /* Sepia shadow utility */
  .shadow-sepia {
    box-shadow: 0 2px 8px rgba(44, 36, 22, 0.08);
  }

  .shadow-sepia-lg {
    box-shadow: 0 4px 24px rgba(44, 36, 22, 0.12);
  }

  /* Gold glow */
  .glow-gold {
    box-shadow: 0 0 12px rgba(184, 134, 11, 0.2);
  }
}

/* ============================================
   Typography — Prose Overrides
   ============================================ */
.prose {
  --tw-prose-body: var(--ink-medium);
  --tw-prose-headings: var(--ink-dark);
  --tw-prose-links: var(--gold);
  --tw-prose-bold: var(--ink-dark);
  --tw-prose-quotes: var(--ink-light);
  --tw-prose-quote-borders: var(--gold);
  --tw-prose-code: var(--gold);
  --tw-prose-pre-bg: var(--fresco-parchment);
  --tw-prose-hr: var(--fresco-shadow);
}

/* ============================================
   Animations — Fresco
   ============================================ */
@keyframes fadeSlideIn {
  from {
    opacity: 0;
    transform: translateY(12px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

@keyframes page-enter {
  from {
    opacity: 0;
    transform: translateY(8px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

@keyframes shimmer-gold {
  0% { background-position: -200% center; }
  100% { background-position: 200% center; }
}

@keyframes float {
  0%, 100% { transform: translateY(0); }
  50% { transform: translateY(-4px); }
}

.page-enter {
  animation: page-enter 0.4s ease-out;
}

.animate-fade-slide-in {
  animation: fadeSlideIn 0.5s ease-out forwards;
}

.animate-float {
  animation: float 3s ease-in-out infinite;
}

/* ============================================
   Responsive Breakpoint Helpers
   ============================================ */
@media (max-width: 768px) {
  h1 { font-size: 2rem; }
  h2 { font-size: 1.5rem; }
  h3 { font-size: 1.25rem; }
}
